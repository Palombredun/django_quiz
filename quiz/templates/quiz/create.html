{% extends 'core/base.html' %}

{% load static %}

<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

{% block content %}
<h1>Cr√©er quiz</h1>
<br>
<br>
<form method="POST" id="quiz-form" data-cities-url="{% url 'ajax_load_subcategories' %}">
    {% csrf_token %}
    <div>
      {{ quiz_form.as_p }}
    <br>
    <hr>
    <br>
    </div>
    </div>
    <div class="tf-form" id="base-tf-form">
      {{ tf_form.as_p }}
    <br>
    <hr>
    <br>
    </div>
    <div class="mc-form" id="base-mc-form">
      {{ mc_form.as_p }}
    <br>
    <hr>
    <br>
    </div>
    <div id="forms">
    </div>
    <input type="submit" value="J'ai fini !" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full">
</form>
<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full" id="add-tf">Ajouter TF</button>
<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full" id="add-mc">Ajouter MC</button>


<script src="{% static 'js/create.js' %}"></script>
<script>
  $("#id_quiz-category").change(function() {
    var url = $("#quiz-form").attr('data-cities-url');
    var categoryId = $(this).val();

    $.ajax({
      url: url,
      data: {
        'category': categoryId
      },
      success: function (data) {
        $('#id_quiz-sub_category').html(data);
      }
    });
  });
</script>

{% endblock %}